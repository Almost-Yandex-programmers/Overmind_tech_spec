# Overmind (ТЕХНИЧЕСКОЕ ЗАДАНИЕ)
# 1. Цель проекта
Цель проекта - разработать онлайн веб-приложение рабочее пространство, позволяющее наладить процессы, связанные с организацией людей, удобно хранить и взаимодействовать с информацией (встречи, записки, todo-планы, текстовые материалы в формате PDF). 
# 2. Описание системы
Система состоит из следующих основных функциональных блоков:
1. Регистрация, аутентификация и авторизация
2. Функционал создания и редактирования страницы проекта
3. Функционал создания записок
4. Функционал создания to-do планов
5. Функционал создания ярлыков (Resources)
6. Функционал PDF-Reader
7. Интеграция Telegram чатов
8. Интеграция Яндекс 360
9. Функционал оплаты подписки
10. Функционал различных уровней доступа (админ, редактор и читатель)
11. Функционал ведения журнала аудита
12. Функционал коворкинга в реальном времени
13. Функционал экспортирования статей (pdf, html, markdown, telegraph)
14. Функционал предоставления доступа к чтению, редактированию для незарегистрированных пользователей
## 2.1. Типы пользователей
Права пользования функционалом будут подразделяться на версию для обычного пользователя и для бизнеса(команды). 
### 2.1.1. Команда
Команда имеет полный функционал системы-ассистента, с возможностями коворкинга в реальном времени, интеграции Telegram-чатов и интеграции возможностей Яндекс 360.
Команда также подразделяется на четыре роли: владельца, администратора команды, редактора и читателя.
### 2.1.2. Обычный пользователь
Обычный пользователь имеет урезанный функционал командного пользования.

Обычный пользователь может использовать данную систему для организации своих процессов и задач, а также для закрепления знаний, для повышения эффективности усвоения информации.
## 2.2. Регистрация
Процесс регистрации будет реализован в интерфейсе приложения. При регистрации пользователя должны быть запрошены следующие поля:

-email - обязательное поле

-пароль - обязательное поле

После отправки формы регистрации пользователя ему на email приходит письмо с одноразовым код-паролем, по которому он сможет войти. Аутентификация будет происходить так же по одноразовым кодам и ссылкам, приходящим на email.
## 2.3. Аутентификация
Аутентификация пользователя осуществляется по email и паролю, а также одноразовым код-паролям или ссылкам, приходящим на email.
## 2.4. Виды функционала
Веб-приложение предусматривает два вида функционала. Есть отдельный функционал для команды, а также отдельный функционал для обычного пользователя.
### 2.4.1. Функционал команды
Команда имеет полный функционал веб-приложения, с возможностями коворкинга в реальном времени, интеграции Telegram-чатов и интеграции возможностей Яндекс 360. Команда также подразделяется на четыре роли: владельца, администратора команды, редактора и читателя. 

Функционал команды заключается в следующих возможностях:
- возможность создать и удалить команду
- редактирование состава, описания и названия команды
- предоставление прав агрегирования с рабочим пространством пользователям
- интеграция доступных веб-приложений
- изменение настроек приватности рабочего пространства
- просмотр и восстановление данных из журнала аудита
- возможность коворкинга в реальном времени
- возможность создания, редактирования и удаления страниц, записок, to-do листов и ярлыков(ресурсов)
- экспорт страниц в форматы .pdf, .html, .md, telegraph
- возможность предоставления доступа для чтения и создания копии текстового материала
### 2.4.2. Функционал обычного пользователя
Возможности обычного пользователя будут сильно отличаться от возможностей команды. Предоставленного функционала будет достаточно для полноценного пользования. Весь дополнительный функционал будет доступен только при оформлении ежемесячной подписки.

Функционал:
- редактирование данных профиля
- возможность создания, редактирования и удаления страниц, записок, to-do листов и ярлыков(ресурсов)
- экспорт страниц в форматы .pdf, .html, .md, telegraph
- возможность предоставления доступа для чтения и создания копии текстового материала
### 2.4.2.1. Редактирование данных профиля
В данном разделе у пользователя есть возможность редактирования данных своего профиля - персональные данные, фотография профиля, email, пароль, название воркспейса и его описание, домен(который указывается в ссылке при возможности поделиться), а также свои интегрированные соц. сети.
## 2.5. Функционал создания и редактирования страницы проекта
Текстовый редактор в разметке markdown.

При написании текста будет возможно использование тэгов markdown, что будет в себе подразумевать постоянный парсинг строк редактирования и транслирования при нажатии "пробела" в определённый тип текстового блока, также будет возможно создание текстовых блоков при помощи интерфейса.

> Обработка текста в markdown будет происходить в момент написания текста, создание блока текста, например заголовка первого порядка, будет писать в кэше "# с пустым заголовком", пустой заголовок будет обрабатываться и не будет показывать пользователю.

После каждого нажатия на "Enter" будет происходить локальное сохранение. Через пять минут будет сохранение на сервер.

Каждое нажатие "Enter" будет делать в кэше два переноса строки.
## 2.6. Функционал создания записок
Обычная текстовая записка, состоящая из нескольких блоков: заголовок, контент и дата создания. Помимо текста здесь будет храниться дата и время последнего редактирования.
## 2.7. Функционал создания to-do планов
В данном разделе будут содержаться:
- календарь, хранящий в себе список задач по датам
- список задач на день  
- проекты, содержащие в себе пространства
## 2.8. Функционал ярлыков (Resources)
Данный функционал подразумевается с целью сохранения ссылок(якорей и ссылкок на страницу в интернете). Возможно будет добавлен предпросмотр ссылок(Youtube, twitch итп).
## 2.9. Функционал PDF-Reader
Пользователи системы могут загружать PDF файлы в систему, с целью использования как удобный "cервис чтения книг".

Будет добавлена возможность сохранения закладок, записок к странице или выделенному тексту. При возвращении к чтению, пользователь будет находиться на странице, на которой закончил чтение в прошлый раз.
## 2.10. Интеграция Telegram чатов
Данный функционал позволяет интегрировать в workspace команды ваш Telegram чат, чтобы работать не переключаясь по вкладкам.
Интегрироваться чат будет при помощи виджета Telegram.
## 2.11. Интеграция Яндекс 360
Яндекс 360 включает большое количество разных сервисов для коворкинга: Документы(создание документов, таблиц и презентаций), Диск(хранилище файлов) и Телемост(видео/аудиочат).
Возможно данная интеграция будет возможна только ввиде переадресации пользователя на предложенные сервисы, но при этом пользователь может записать ссылки в раздел ярлыков(resources).
## 2.12. Рекуррентные платежи
Рекуррентные платежи должны списываться через 30 дней после предыдущей оплаты. Если снять платёж не удалось — в течение ближайших 5 дней должна осуществляться ежедневная попытка списать сумму. В течение этих 5 дней доступ сохраняется, а подписчик получает после каждой неуспешной попытки письмо на email. После успешного снятия суммы за подписку подписчик также получает письмо на email.

После 5 дней неуспешных попыток списать сумму подписка останавливается и подписчик теряет доступ к функционалу. В команде, доступ редактирования будет только у владельца команды, остальные же члены станут только читателями.

Шаблоны писем не редактируется в интерфейсах Системы, жёстко зашиты в самой системе и их можно отредактировать только изменяя эти шаблоны в коде Системы.
## 2.13. Функционал различных уровней доступа
Для команды подразумевается четыре уровня доступа(роли):
1. Владелец
2. Администратор
3. Редактор
4. Читатель(гость)
### 2.13.1. Владелец
Владелец команды имеет полный доступ к редактированию команды(состав, описание, название) и имеет возможности выдачи ролей для других членов команды.
Только владелец может удалить команду.
### 2.13.2. Администратор
Администратор - роль, назначаемая владельцем. Администратор может выдавать роль редактора, а также редактировать добавлять и удалять членов команды, менять описание и название команды, интегрировать доступные функционалом системы веб-приложения. Также администратор может переключать приватность workspace(возможность делиться материалом(файлами, статьями, to-do планами итд.)).
Просмотр журнала аудита.
### 2.13.3. Редактор
Редактор может только создавать новые страницы, редактировать существующие и возможность поделиться материалом, если в настройках приватности эта функция включена.
### 2.13.4. Читатель(Гость)
Авторизированный или неавторизированный пользователь, который может только просматривать контент workspace.
## 2.14. Функционал ведения журнала аудита
Журнал аудита показывает все сессии изменения материалов workspace. Предусматривается восстановление резервных копий в состояние, сохранённой в журнале аудита.
Записи журнала аудита(резервные копии) будут сохраняться каждые 5 минут, исключение(создание, удаление файлов).

Просматривать журнал аудита могут только администраторы и владелец команды.
Журнал аудита для обычного пользователя, также будет доступен по платной подписке.
## 2.15. Функционал коворкинга в реальном времени
Рабочее пространство Overmind подразумевает функционал для коворкинга команды в реальном времени: совместное написание документации или статей.

При включении функции коворкинга, все члены команды, зашедшие на страницу со статьёй будут видеть курсоры всех зашедших. Область в которой член команды начинает писать блокируется для всех остальных членов команды, чтобы не произошло сбоя синхронизации.
## 2.16. Функционал экспортирования статей (pdf, html, markdown, telegraph)
Для удобства пользователя будет осуществлён функционал экспортирования страницы, для каждого формата потребуется написать шаблоны(конвертеры)
### 2.16.1. Экспортирование в PDF
Потребуется парсер Markdown и шаблоны с настройками для оформления текстового материала.

Пользователь может выбирать настройки PDF документа (формат для печати итп), также может выбрать вариант стиля оформления документа, из предложенных.
### 2.16.2. Экспортирование в HTML
Потребуется парсер Markdown и шаблоны с настройками для оформления текстового материала.

Экспортирование в HTML осуществлеяется по похожему функционалу, что и экспортирование в PDF.
### 2.16.3. Экспортирование в Markdown
Так как все функциональные текстовые блоки поддерживают разметку Markdown, то экспортирование будет происходить моментально.
### 2.16.4. Экспортирование в Telegraph
Так как Telegraph поддерживает разметку Markdown, то экспортирование будет также происходит моментально.
Будет реализовано при помощи Telegraph API.
# 3. Предлагаемый стек технологий
Для реализации системы предлагается следующий стек технологий:
 - Бэкенд:
   - Язык Python
   - Фреймворк Django
   - БД PostgreSQL
   - SQLAlchemy ORM
 - Фронтенд:
   - React
   - TypeScript
# 4. Требования к дизайну
Минимализм, лаконичность, акцент на контент. Должны быть разработаны две цветовые темы(тёмная и светлая). Должен присутствовать логотип системы где-то на странице. Логотип надо разработать в рамках этого проекта.
