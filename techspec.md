# Overmind (ТЕХНИЧЕСКОЕ ЗАДАНИЕ)
# 1. Цель проекта
Цель проекта - разработать систему-ассистент, позволяющую хранить информацию в формате markdown, хранение записок, хранения todo планов и хранения текстовых материалов. Проект будет подразделяться на версию для обычного пользователя и для бизнеса(команды). Обычный пользователь может использовать данную систему для закрепления знаний для повышения эффективности усвоения информации. Для команды система-ассистент будет интересна как онлайн workspace, подразумевается интеграция с telegram-чатами, Яндекс.Документы и Яндекс.Телемост.
# 2. Описание системы
Система состоит из следующих основных функциональных блоков:
1. Регистрация, аутентификация и авторизация
2. Функционал создания и редактирования страницы
3. Функционал создания записок
4. Функционал создания to-do планов
5. Функционал создания ярлыков (Resources)
6. Функционал PDF-Reader
7. Интеграция Telegram чатов
8. Интеграция Яндекс 360
9. Функционал оплаты подписки
10. Функционал различных уровней доступа (админ, редактор и читатель)
11. Функционал ведения журнала аудита
12. Функционал коворкинга в реальном времени
13. Функционал экспортирования статей (pdf, html, markdown, telegraph)
## 2.1. Типы пользователей
Система-ассистент предусматривает два типа пользователей: команда и обычный пользователь.
Все пользователи имеют возможность поделиться файлами.
### 2.1.1. Команда
Команда имеет полный функционал системы-ассистента, с возможностями коворкинга в реальном времени, интеграции Telegram-чатов и интеграции возможностей Яндекс 360.
Команда также подразделяется на четыре роли: владельца, администратора команды, редактора и читателя.
### 2.1.2. Обычный пользователь
Обычный пользователь имеет урезанный функционал командного пользования.
## 2.2. Регистрация
Процесс регистрации будет реализован в интерфейсе приложения. При регистрации пользователя должны быть запрошены следующие поля:

-email - обязательное поле

-пароль - обязательное поле

После отправки формы регистрации пользователя ему на email приходит письмо с одноразовым код-паролем, по которому он сможет войти. Аутентификация будет происходить так же по одноразовым кодам и ссылкам, приходящим на email.
## 2.3. Аутентификация
Аутентификация пользователя осуществляется по email и паролю, а также одноразовым код-паролям или ссылкам, приходящим на email.
## 2.4.1. Функционал команды

Команда имеет полный функционал системы-ассистента, с возможностями коворкинга в реальном времени, интеграции Telegram-чатов и интеграции возможностей Яндекс 360. Команда также подразделяется на четыре роли: владельца, администратора команды, редактора и читателя. 

Функционал команды заключается в следующих возможностях:
- возможность создать и удалить команду
- редактирование состава, описания и названия команды
- выдача ролей пользователям
- интеграция доступных веб-приложений
- изменение настроек приватности рабочего пространства
- просмотр и восстановление данных из журнала аудита
- возможность коворкинга в реальном времени
- возможность создания, редактирования и удаления страниц
- экспорт страниц в форматы .pdf, .html, .md, telegraph.
## 2.4.2. Функционал обычного пользователя
Пользователь после аутентификации получает доступ к функционалу. Этот функционал состоит из следующих блоков:
1. Редактирование данных профиля
2. Создание и редактирование страниц, записок, to-do листов
3. Создание и редактирование ярлыков
### 2.4.2.1. Редактирование данных профиля
В данном разделе у пользователя есть возможность редактирования данных своего профиля - персональные данные, фотография профиля, email, пароль, название воркспейса и его описание, домен(который указывается в ссылке при возможности поделиться), а также свои интегрированные соц. сети.
## 2.5. Функционал создания записок

## 2.6. Функционал создания to-do планов

## 2.7. Функционал ярлыков (Resources)
Данный функционал подразумевается с целью сохранения ссылок(якорей и ссылкок на страницу в интернете). Возможно будет добавлен предпросмотр ссылок(Youtube, twitch итп).
## 2.8. Функционал PDF-Reader
Пользователи системы могут загружать PDF файлы в систему, с целью использования как удобный "cервис чтения книг".

Будет добавлена возможность сохранения закладок, записок к странице или выделенному тексту. При возвращении к чтению, пользователь будет находиться на странице, на которой закончил чтение в прошлый раз.
## 2.9. Интеграция Telegram чатов
Данный функционал позволяет интегрировать в workspace команды ваш Telegram чат, чтобы работать не переключаясь по вкладкам.
Интегрироваться чат будет при помощи виджета Telegram.
## 2.10. Интеграция Яндекс 360
Яндекс 360 включает большое количество разных сервисов для коворкинга: Документы(создание документов, таблиц и презентаций), Диск(хранилище файлов) и Телемост(видео/аудиочат).
Возможно данная интеграция будет возможна только ввиде переадресации пользователя на предложенные сервисы, но при этом пользователь может записать ссылки в раздел ярлыков(resources).
## 2.11. Рекуррентные платежи
Рекуррентные платежи должны списываться через 30 дней после предыдущей оплаты. Если снять платёж не удалось — в течение ближайших 5 дней должна осуществляться ежедневная попытка списать сумму. В течение этих 5 дней доступ сохраняется, а подписчик получает после каждой неуспешной попытки письмо на email. После успешного снятия суммы за подписку подписчик также получает письмо на email.

После 5 дней неуспешных попыток списать сумму подписка останавливается и подписчик теряет доступ к функционалу. В команде, доступ редактирования будет только у владельца команды, остальные же члены станут только читателями.

Шаблоны писем не редактируется в интерфейсах Системы, жёстко зашиты в самой системе и их можно отредактировать только изменяя эти шаблоны в коде Системы.
## 2.12. Функционал различных уровней доступа
Для команды подразумевается четыре уровня доступа(роли):
1. Владелец
2. Администратор
3. Редактор
4. Читатель(гость)
### 2.12.1. Владелец
Владелец команды имеет полный доступ к редактированию команды(состав, описание, название) и имеет возможности выдачи ролей для других членов команды.
Только владелец, может удалить команду.
### 2.12.2. Администратор
Администратор - роль, назначаемая владельцем. Администратор может выдавать роль редактора, а также редактировать добавлять и удалять членов команды, менять описание и название команды, интегрировать доступные функционалом системы веб-приложения. Также администратор может переключать приватность workspace(возможность делиться материалом(файлами, статьями, to-do планами итд.)).
Просмотр журнала аудита.
### 2.12.3. Редактор
Редактор может только создавать новые страницы, редактировать существующие и возможность поделиться материалом, если в настройках приватности эта функция включена.
### 2.12.4. Читатель(Гость)
Авторизированный или неавторизированный пользователь, который может только просматривать контент workspace.
## 2.13. Функционал ведения журнала аудита
Журнал аудита показывает все сессии изменения материалов workspace. Предусматривается восстановление резервных копий в состояние, сохранённой в журнале аудита.
Записи журнала аудита(резервные копии) будут сохраняться каждые 5 минут, исключение(создание, удаление файлов).

Просматривать журнал аудита могут только администраторы и владелец команды.
Журнал аудита для обычного пользователя, также будет доступен по платной подписке.
## 2.14. Функционал коворкинга в реальном времени
Рабочее пространство Overmind подразумевает функционал для коворкинга команды в реальном времени: совместное написание документации или статей.

При включении функции коворкинга, все члены команды, зашедшие на страницу со статьёй будут видеть курсоры всех зашедших. Область в которой член команды начинает писать блокируется для всех остальных членов команды, чтобы не произошло сбоя синхронизации.
## 2.15. Функционал экспортирования статей (pdf, html, markdown, telegraph)
Для удобства пользователя будет осуществлён функционал экспортирования страницы, для каждого формата потребуется написать шаблоны(конвертеры)
### 2.15.1. Экспортирование в PDF
Пользователь может выбирать настройки PDF документа (формат для печати итп), также может выбрать вариант стиля оформления документа, из предложенных.
### 2.15.2. Экспортирование в HTML
Экспортирование в HTML осуществлеяется по похожему функционалу, что и экспортирование в PDF.
### 2.15.3. Экспортирование в Markdown
Так как все статьи у нас в разметке Markdown, то экспортирование будет происходить моментально.
### 2.15.4. Экспортирование в Telegraph
Будет реализовано при помощи Telegraph API.
# 3. Предлагаемый стек технологий
Для реализации системы предлагается следующий стек технологий:
 - Бэкенд:
 - - Язык Python
 - - Фреймворк Django
 - - БД PostgreSQL
 - - SQLAlchemy ORM
 - - Alembic для миграций
 - Фронтенд:
 - - React
 - - TypeScript
# 4. Требования к дизайну
Минимализм, лаконичность, акцент на контент. Должны быть разработаны две цвветовые темы(тёмная и светлая). Должен присутствовать логотип Системы где-то на странице. Логотип надо разработать в рамках этого проекта.
